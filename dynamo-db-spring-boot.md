Spring boot dynamoDB connectivity

> Pre-requisites:
 1. DynamoDB Instance (either local or cloud)
 2. AWS Access Keys   (local uses fake keys )


> Steps:
1. Create a new Spring boot stater project without ANY starter pom
2. Once project is generated, open "POM.XML" and add few dependencies:

    ```xml
	<dependency>
		<groupId>com.amazonaws</groupId>
		<artifactId>aws-java-sdk-dynamodb</artifactId>
		<version>1.11.64</version>
	</dependency>
	<dependency>
		<groupId>com.github.derjust</groupId>
		<artifactId>spring-data-dynamodb</artifactId>
		<version>5.1.0</version>
	</dependency>
    ```

3. Define AWS DynamoDB connection properties inside "application.properties" file
	
    ```ini
	amazon.aws.accesskey=fakeid
	amazon.aws.secretkey=fakekey
	amazon.dynamodb.endpoint=http://localhost:8000		
    ```

4. Define "custom configuration" for AWS DynamoDB
	1. AWS Credentials
	2. DynamoDB Mapper (Translate Java Class into NoSQL Entity)

    ```java
    @Configuration
    public class DynamoConfig {
        
        @Value("${amazon.dynamodb.endpoint}")
        private String amazonDynamoDbEndpoint;
        
        @Value("${amazon.aws.accesskey}")
        private String amazonAccessKey;
        
        @Value("${amazon.aws.secretkey}")
        private String amazonSecretKey;
        

        @Bean /// Spring managed component
        public AmazonDynamoDB dynamoDb() {
            AmazonDynamoDB db = new AmazonDynamoDBClient(new BasicAWSCredentials(amazonAccessKey, amazonSecretKey));
            db.setEndpoint(amazonDynamoDbEndpoint);
            return db;
        }
    }
    ```

5. Define a sample Entity Class 

    ```java
    @DynamoDBTable(tableName = "employees")
    public class Employee {
        private String empId;
        private String firstName;
        private String lastName;
        
        
        @DynamoDBHashKey
        @DynamoDBAutoGeneratedKey
        public String getEmpId() {
            return empId;
        }
        
        @DynamoDBAttribute
        public String getFirstName() {
            return firstName;
        }
        public void setFirstName(String firstName) {
            this.firstName = firstName;
        }
        @DynamoDBAttribute
        public String getLastName() {
            return lastName;
        }
        public void setLastName(String lastName) {
            this.lastName = lastName;
        }
            
    }
    ```

6. Repository class (DAO)

    ```java
    @EnableScan
    public interface EmployeeRepo extends CrudRepository<Employee, String>{
        
    }
    ```

7. Modiy the "application" class and "implement" interface "CommandLineRunner"
8. Override method "run"

    ```java
    @Override
        public void run(String... args) throws Exception {
            mapper = new DynamoDBMapper(db);
            CreateTableRequest createTable = mapper.generateCreateTableRequest(Employee.class);
            createTable.setProvisionedThroughput(new ProvisionedThroughput(1L, 1L));
            try {
                CreateTableResult result = db.createTable(createTable);
                System.out.println(result);
            } catch (ResourceInUseException ex) {
                System.out.println("Cannot create table :" + ex.getMessage());
            }
                
        }
    }
    ```